# Bureau user-tunable configuration
# - Changes to this file will directly alter Bureau's behavior. 
# - See CONFIGURATION.md for details.
#
# This file is version-controlled and shared across all users.
# For local overrides (not to be tracked by git), create and write to local.yml instead.

# Coding agent CLIs that Bureau should configure
# Available: claude, gemini, codex, opencode
agents:
  - claude
  - gemini
  - codex
  - opencode

# Retention periods (per memory backend), after which memories older than this threshold
#   will be moved to trash automatically by the cleanup process
# Formats: never, 24h (hours), 30d (days), 2w (weeks), 3m (months), 1y (years)
retention_period_for:
  claude_mem: 30d    # Claude-mem SQLite database (Claude Code only)
  serena: 90d        # Serena project memories (.serena/memories/)
  qdrant: 180d       # Qdrant vector database (used by all enabled CLIs)
  memory_mcp: 365d   # Memory MCP JSONL file (used by all enabled CLIs)

# Cleanup interval (for stale memories)
cleanup:
  min_interval: 24h

# Grace period after stale items are moved to trash
#   before permanent deletion
trash:
  grace_period: 30d

# Timeouts (in seconds) to wait when starting up components (increase for slower machines)
startup_timeout_for:
  mcp_servers: 200       # For HTTP MCP servers started by Bureau
  docker_daemon: 120     # For Docker daemon startup

# Ports for locally-run HTTP servers & backing DB containers
port_for:
  qdrant_db: 8780
  qdrant_mcp: 8782
  sourcegraph_mcp: 8783
  semgrep_mcp: 8784
  serena_mcp: 8785

# File paths for config files, connection settings, etc.
# Note: environment variables take precedence over these values
path_to:
  # Base workspace for user projects (override using: $BUREAU_WORKSPACE)
  # When set, the following paths are automatically derived from it (unless explicitly overridden):
  #   - serena_projects (base for locating Serena memories)
  #   - fs_mcp_whitelist (Filesystem MCP security boundary)
  workspace: ~/code

  # MCP server clone location (relative paths resolve from main repo root, shared across worktrees)
  mcp_clones: .mcp-servers

# MCP tool permissions
# When true, agents won't prompt for permission before using MCP tools
mcp:
  auto_approve: no

# PAL clink configuration: controls which models and system prompts are available
#   when using PAL MCP's clink tool to spawn subagents across coding CLIs
pal:
  # Baseline roles made available to ALL coding CLIs
  #
  # - Roles are auto-discovered based on the set in agents/role-prompts
  # - Options (also for per-CLI `extra-roles` settings below):
  #   - "all" => include all role prompts (note that when this is set, 
  #     the per-CLI `extra-roles` settings below will have no effect)
  #   - "none" => include no roles
  #   - an explicitly-specified list of role prompts, referenced by their file's basename, 
  #     e.g. `architect` for `agents/role-prompts/architect.md`
  base-roles: all

  # PAL CLI-specific setting options
  # IMPORTANT: After changing any of the settings below:
  #   1. Re-run protocols/scripts/set-up-configs.sh (or bin/open-bureau wrapper)
  #   2. Restart coding CLIs (or if possible, use their MCP-related commands without 
  #      restarting) to reconnect to PAL
  claude:
    # Takes any valid option for Claude's `model` config setting
    #   (see https://code.claude.com/docs/en/model-config)
    model: sonnet

    # Extra role prompts (beyond `base-roles` above) to make available to 
    #   only Claude when called via clink
    extra-roles: none

  codex:
    # Takes any valid option for Codex's `model` config setting
    #   (see https://developers.openai.com/codex/local-config#configuration-options)
    model: gpt-5.2-codex

    # Takes any valid option for Codex's `model_reasoning_effort` config setting
    #   (see https://developers.openai.com/codex/local-config#configuration-options)
    effort: medium

    # Extra role prompts (beyond `base-roles` above) to make available to 
    #   only Codex when called via clink
    extra-roles: none

  gemini:
    # Extra role prompts (beyond `base-roles` above) to make available to 
    #   only Gemini when called via clink
    extra-roles: none
